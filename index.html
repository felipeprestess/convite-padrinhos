<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;700&display=swap" rel="stylesheet">
    <title>Convite dos Padrinhos</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h1>Convite Especial</h1>
        <p class="overlay-text">Vocês que fizeram parte de momentos especiais de nossas vidas, queremos lhe convidar
            para mais um!</p>

        <!-- Botão para ver mais detalhes -->
        <button id="show-more" class="btn">Clica aqui e veja mais</button>

        <!-- Conteúdo escondido -->
        <div id="details" class="hidden">

            <div>
                <p class="overlay-text">
                    Vocês são parte essencial das nossas vidas, e não poderíamos imaginar esse momento
                    especial sem vocês ao nosso lado. É com muito amor que os convidamos para serem nossos
                    padrinhos de casamento. Aceitam embarcar nessa jornada conosco?
                </p>
            </div>

            <!-- Contador Regressivo -->
            <div id="countdown">
                <h2>Nosso casamento está marcado para o dia 13/11/2025. Então faltam:</h2>
                <p id="timer">Carregando...</p>
            </div>

            <!-- Formulário -->
            <form id="appointment-form">
                <h2>Escolha uma data para nosso encontro:</h2>
                <label for="couple">Casal</label>
                <input text="text" id="couple" name="couple" placeholder="Digite o nome do casal" required />
                <label for="date">Data:</label>
                <input type="date" id="date" name="date" required>
                <label for="time">Hora:</label>
                <input type="time" id="time" name="time" required>
                <label for="location">Local:</label>
                <input type="text" id="location" name="location" placeholder="Digite o local" required>
                <button type="submit">É isso, bore</button>
            </form>

            <!-- Playlist -->
            <div id="playlist">
                <h2>Colabore com nossa playlist de casamento:</h2>
                <iframe src="https://open.spotify.com/embed/playlist/3Xyj5C765mTr94frDggvHQ?si=57c903eca16f44a7"
                    width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media">
                </iframe>
            </div>
        </div>

        <p class="footer">Com carinho, Aline & Felipe ❤️</p>
    </div>
    <script src="script.js"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script>
        //const form = document.getElementById('appointment-form');

        console.log(form)

        form.addEventListener("submit", async (event) => {
            event.preventDefault();

            const padrinhoData = {
                couple: document.getElementById("couple").value || "Casal de padrinhos",
                date: document.getElementById("date").value,
                time: document.getElementById("time").value,
                location: document.getElementById("location").value,
            };

            try {
                const currentPadrinhos = [];

                // Adicionar os novos dados
                currentPadrinhos.push(padrinhoData);

                // Atualizar o JSONBin com os novos dados
                const updateResponse = await fetch("https://api.jsonbin.io/v3/b/67425c6dad19ca34f8cf2944", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-Master-Key": "$2a$10$G9vBMF6/d2pRjDPnBh/VgOD7klnG6/GnHUDMRCkE3.ezxvxtPNKky"
                    },
                    body: JSON.stringify({ padrinhos: currentPadrinhos })
                });

                if (updateResponse.ok) {
                    alert("Dados enviados com sucesso!");
                } else {
                    throw new Error("Erro ao atualizar o JSONBin");
                }
            } catch (error) {
                console.error("Erro:", error);
                alert("Erro ao enviar os dados. Consulte o console para mais informações.");
            }

            form.reset();
        });
    </script>
</body>

</html>